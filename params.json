{"name":"Kitchensync","tagline":"Java Library for Distributed Communication","body":"# A Java Library for Distributed Communication\r\n\r\nYou are special agent Michael Roedick in charge of covert ops software development at the NSA.  Keith Alexander has just called you into his [office](http://www.businessinsider.com.au/the-us-army-star-trek-command-center-2013-9) to discuss the requirements for software to support a covert programme.\r\n\r\n\"Hi Michael, thanks for beaming in.  Good to see you.  Take a seat.  I trust you read the brief regarding [Operation FUBAR](http://www.urbandictionary.com/define.php?term=gang%20stalking)?\"\r\n\r\n\"Yes I did.  So what kind of software do the operatives need?\"\r\n\r\n\"It has to allow communication between field operatives and allow broadcasting of messages to groups.  This includes text, images, videosâ€¦\"\r\n\r\n\"Ok, what is the use case for it?\"\r\n\r\n\"Right. The [TI](http://www.urbandictionary.com/define.php?term=targeted%20individual) will be monitored by agents around the domicile.  The software needs to be able to send false data to other operatives on a regular basis to provide plausible deniability.  The operation data will be encrypted and the connections between operatives must be encrypted.   When the TI leaves the agents around the domicile will need to send messages to alert agents in the field of the TI's movements. It needs to happen in near-realtime in order to coordinate the various operations each group must undertake.\"\r\n\r\n\"Ok, so the [street theatre](http://www.urbandictionary.com/define.php?term=street%20theater) operatives and [gaslighting](http://www.urbandictionary.com/define.php?term=Gaslighting) operatives can coordinate based on whether the TI is in the vicinity or not, right?\"\r\n\r\n\"Exactly.  And it needs to be able to send pictures and video to either individual operatives or groups.  The groups need to be easily created, communicated and destroyed on demand.  And you'll need to use some open source libraries to disguise the software.  You know, like what we did for Linux.  Say, you still in touch with Linus?\"\r\n\r\n\"I send him a fruit basket every Christmas.  I think I've got it, and I know where to start.\"\r\n\r\nYou rise to leave when you hear your boss - \"Ah ah ah - what do we say?\"\r\n\r\n\"Whoops...Permission to leave the bridge sir.\"\r\n\r\n\"Permission granted.\"\r\n\r\nSpecial Agent Roedick, KitchenSync is just the thing for you!\r\n\r\n# Release 1.2 - July 31, 2014\r\n\r\n* Added isPortSpecificChannel to KiSyChannel interface, implemented in abstract superclasses\r\n* More efficient sorting of inbound and outbound handlers\r\n* Added [ByteBufCreator](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/payload/ByteBufCreator.java) interface to allow [KiSyChannels](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/KiSyChannel.java) to easily override the default message creation (strings, byte arrays and [KiSyMessages](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/message/KiSyMessage.java).\r\n* generics fix in inbound and outbound managers\r\n\r\n# Release 1.1 - July 26, 2014\r\n\r\n* Added isMulticastChannel to KiSyChannel interface, implemented in abstract superclasses\r\n* Code reorganization\r\n\r\n# Quickstart\r\n\r\n* Ivy dependency - &lt;dependency org=\"com.github.mrstampy\" name=\"KitchenSync\" rev=\"1.1\"/&gt;\r\n* [Example code](https://github.com/mrstampy/KitchenSync/tree/master/KitchenSync/test/com/github/mrstampy/kitchensync/test)\r\n\r\n# KitchenSync Architecture\r\n\r\nKitchenSync is a Java Library for non-centralized network communication between separate processes using the [UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol) protocol.  Channels can be created as multicast channels which allow broadcasting of messages to all connected channels, port-specific channels or next-port-available channels and are intended to be easily created and destroyed as required. It is built on top of [Netty](http://netty.io) and is designed to be simple to understand and use while providing the ability to customise individual channels.  \r\n\r\nTwo interfaces - [KiSyChannel](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/KiSyChannel.java) and [KiSyMulticastChannel](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/KiSyMulticastChannel.java) - provide the API for network communication.  Three abstract implementations - [AbstractKiSyChannel](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/AbstractKiSyChannel.java), [AbstractPortSpecificKiSyChannel](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/AbstractPortSpecificKiSyChannel.java), and [AbstractKiSyMulticastChannel](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/AbstractKiSyMulticastChannel.java) - exist for ease of channel creation:\r\n\r\n\tprotected KiSyChannel initChannel() {\r\n\t\tAbstractKiSyChannel channel = new AbstractKiSyChannel() {\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected ChannelInitializer<DatagramChannel> initializer() {\r\n\t\t\t\treturn new SslInitializer();\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected Class<? extends DatagramChannel> getChannelClass() {\r\n\t\t\t\treturn NioDatagramChannel.class;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tchannel.bind();\r\n\r\n\t\treturn channel;\r\n\t}\r\n\r\nThe [ChannelInitializer](http://netty.io/4.0/api/io/netty/channel/ChannelInitializer.html) is a Netty class which is used to initialise a [Bootstrap](http://netty.io/4.0/api/io/netty/bootstrap/Bootstrap.html) object for the channel and is ignored if the Bootstrap [already exists](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/DefaultChannelRegistry.java).  [Netty channel handlers](http://netty.io/4.0/api/io/netty/channel/ChannelHandler.html) are added to the channel's pipeline in the implementation of the ChannelInitializer to control the channel's behaviour such as using SSL for connections:\r\n\r\n\t@Override\r\n\tprotected void initChannel(DatagramChannel ch) throws Exception {\r\n\t\tChannelPipeline pipeline = ch.pipeline();\r\n\r\n\t\tpipeline.addLast(new SslHandler(context.createSSLEngine()));\r\n\t\tpipeline.addLast(new KiSyMessageHandler());\r\n\t}\r\n\r\nKiSyChannels can send and receive one of three types of messages by default - [byte arrays](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/initializer/ByteArrayMessageInitializer.java), [strings](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/initializer/StringMessageInitializer.java) or [KiSyMessage](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/netty/channel/initializer/KiSyMessageInitializer.java)s.\r\n\r\n## Inbound and Outbound\r\n\r\nKitchenSync adds to the Netty architecture - which provides the ability to add custom handlers to interface with applications - by providing [inbound](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/message/inbound/KiSyInboundMessageManager.java) and [outbound](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/message/outbound/KiSyOutboundMessageManager.java) message managers which are initialised on application startup to apply [inbound](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/message/inbound/KiSyInboundMesssageHandler.java) and [outbound](https://github.com/mrstampy/KitchenSync/blob/master/KitchenSync/src/com/github/mrstampy/kitchensync/message/outbound/KiSyOutboundMessageHandler.java) application specific KitchenSync handler implementations to messages.  This separates channel configuration (in the ChannelInitializer) from message processing such as logging of messages, persistence of messages, autonomous event triggering on message, etc.  The handlers' execution is ordered to allow sequential operations to take place.  Note that the handlers exist for preparation of messages for processing by the application and execution of any presend logic.  Any significant processing of the message should be done on a separate thread.  Strictly speaking only one implementation is necessary - inbound, to pull messages into the application.\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}